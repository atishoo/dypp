(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1293aa52"],{2667:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[r("el-page-header",{attrs:{content:"抖音扫码授权"},on:{back:function(e){return t.$router.back()}}}),r("div",{staticClass:"qrbody"},[""==t.qrtext?r("h3",[t._v("获取授权码失败，请返回重试")]):"二维码已过期"==t.qrtext||"单量不足，请充值后再继续添加"==t.qrtext||"权限不足，无法操作"==t.qrtext?r("h3",[t._v(t._s(t.qrtext))]):[r("vue-qr",{staticClass:"qrimg",attrs:{text:t.qrtext,size:220,correctLevel:3,margin:8}}),r("div",{staticClass:"hint"},[t._v("请使用抖音APP进行扫码")])]],2)],1)},a=[],i=r("658f5"),s=r.n(i),o=r("240a"),c={name:"Qrgrant",metaInfo:{title:"抖音账号授权"},components:{VueQr:s.a},data:function(){return{qrtext:"正在加载中...",token:"",cookie:""}},timer:null,mounted:function(){var t=this;1==this.$store.state.user.role&&0==this.$store.state.user.balance?this.qrtext="单量不足，请充值后再继续添加":o["a"].Douyin.grant().then((function(e){e.status>0?(t.qrtext=e.data.url,t.token=e.data.token,t.cookie=e.data.cookie,t.timer=setInterval((function(){o["a"].Douyin.check(t.token,t.cookie).then((function(e){"confirmed"==e.msg?(t.$router.back(),null!=t.timer&&clearInterval(t.timer)):"expired"==e.msg&&(t.qrtext="二维码已过期",null!=t.timer&&clearInterval(t.timer))}))}),1e3)):-1==e.status?t.qrtext="单量不足，请充值后再继续添加":-2==e.status?t.qrtext="权限不足，无法操作":t.qrtext=""}))},beforeDestroy:function(){null!=this.timer&&clearInterval(this.timer)}},u=c,l=(r("6fae"),r("2877")),f=Object(l["a"])(u,n,a,!1,null,"0ce5a5d8",null);e["default"]=f.exports},"6fae":function(t,e,r){"use strict";var n=r("803b"),a=r.n(n);a.a},"803b":function(t,e,r){}}]);
//# sourceMappingURL=chunk-1293aa52.3bc13323.js.map