{"version":3,"sources":["webpack:///./src/views/Qrgrant.vue?b216","webpack:///src/views/Qrgrant.vue","webpack:///./src/views/Qrgrant.vue?97fc","webpack:///./src/views/Qrgrant.vue","webpack:///./src/views/Qrgrant.vue?2579"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","back","qrtext","_v","_s","staticRenderFns","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,iBAAiB,CAACG,MAAM,CAAC,QAAU,UAAUC,GAAG,CAAC,KAAO,SAASC,GAAQ,OAAOT,EAAIU,QAAQC,WAAWP,EAAG,MAAM,CAACE,YAAY,UAAU,CAAc,IAAZN,EAAIY,OAAYR,EAAG,KAAK,CAACJ,EAAIa,GAAG,mBAAgC,UAAZb,EAAIY,QAAqE,kBAAZZ,EAAIY,QAA6E,aAAZZ,EAAIY,OAAhHR,EAAG,KAAK,CAACJ,EAAIa,GAAGb,EAAIc,GAAGd,EAAIY,WAAgJ,CAACR,EAAG,SAAS,CAACE,YAAY,QAAQC,MAAM,CAAC,KAAOP,EAAIY,OAAO,KAAO,IAAI,aAAe,EAAE,OAAS,KAAKR,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACN,EAAIa,GAAG,oBAAoB,IAAI,IAClqBE,EAAkB,G,kCCkBtB,GACE,KAAF,UACE,SAAF,CACI,MAAJ,UAEE,WAAF,CACI,MAAJ,KAEE,KAAF,WACI,MAAJ,CACM,OAAN,WACM,MAAN,GACM,OAAN,KAGE,MAAF,KACE,QAhBF,WAgBI,IAAJ,OACA,kEACM,KAAN,wBAEM,EAAN,sCACA,YACU,EAAV,kBACU,EAAV,mBACU,EAAV,qBAEU,EAAV,8BACY,EAAZ,sDACA,oBACgB,EAAhB,eACA,eACkB,cAAlB,UAEA,mBACgB,EAAhB,gBACA,eACkB,cAAlB,eAIA,OACA,YACU,EAAV,yBACA,YACU,EAAV,mBAGU,EAAV,cAKE,cApDF,WAqDA,kBACM,cAAN,cCzEiV,I,wBCQ7UC,EAAY,eACd,EACAjB,EACAgB,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,6CCnBf,yBAAoiB,EAAG,G","file":"js/chunk-1293aa52.3bc13323.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('el-page-header',{attrs:{\"content\":\"抖音扫码授权\"},on:{\"back\":function($event){return _vm.$router.back()}}}),_c('div',{staticClass:\"qrbody\"},[(_vm.qrtext=='')?_c('h3',[_vm._v(\"获取授权码失败，请返回重试\")]):(_vm.qrtext=='二维码已过期')?_c('h3',[_vm._v(_vm._s(_vm.qrtext))]):(_vm.qrtext=='单量不足，请充值后再继续添加')?_c('h3',[_vm._v(_vm._s(_vm.qrtext))]):(_vm.qrtext=='权限不足，无法操作')?_c('h3',[_vm._v(_vm._s(_vm.qrtext))]):[_c('vue-qr',{staticClass:\"qrimg\",attrs:{\"text\":_vm.qrtext,\"size\":220,\"correctLevel\":3,\"margin\":8}}),_c('div',{staticClass:\"hint\"},[_vm._v(\"请使用抖音APP进行扫码\")])]],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"content\">\n        <el-page-header @back=\"$router.back()\" content=\"抖音扫码授权\" />\n        <div class=\"qrbody\">\n            <h3 v-if=\"qrtext==''\">获取授权码失败，请返回重试</h3>\n            <h3 v-else-if=\"qrtext=='二维码已过期'\">{{ qrtext }}</h3>\n            <h3 v-else-if=\"qrtext=='单量不足，请充值后再继续添加'\">{{ qrtext }}</h3>\n            <h3 v-else-if=\"qrtext=='权限不足，无法操作'\">{{ qrtext }}</h3>\n            <template v-else>\n                <vue-qr :text=\"qrtext\" :size=\"220\" :correctLevel=\"3\" :margin=\"8\" class=\"qrimg\"></vue-qr>\n                <div class=\"hint\">请使用抖音APP进行扫码</div>\n            </template>\n        </div>\n    </div>\n</template>\n\n<script>\nimport VueQr from 'vue-qr';\nimport request from \"@/request\";\nexport default {\n    name: \"Qrgrant\",\n    metaInfo: {\n        title: '抖音账号授权',\n    },\n    components: {\n        VueQr,\n    },\n    data: function () {\n        return {\n            qrtext: '正在加载中...',\n            token: '',\n            cookie: ''\n        };\n    },\n    timer: null,\n    mounted() {\n        if (this.$store.state.user.role==1&&this.$store.state.user.balance==0) {\n            this.qrtext = '单量不足，请充值后再继续添加';\n        }else{\n            request.Douyin.grant().then(res=>{\n                if (res.status > 0) {\n                    this.qrtext = res.data.url;\n                    this.token = res.data.token;\n                    this.cookie = res.data.cookie;\n\n                    this.timer = setInterval(()=>{\n                        request.Douyin.check(this.token, this.cookie).then(res=>{\n                            if (res.msg == 'confirmed') {\n                                this.$router.back();\n                                if (this.timer != null) {\n                                    clearInterval(this.timer);\n                                }\n                            }else if (res.msg == 'expired') {\n                                this.qrtext = '二维码已过期';\n                                if (this.timer != null) {\n                                    clearInterval(this.timer);\n                                }\n                            }\n                        });\n                    }, 1000);\n                }else if(res.status == -1) {\n                    this.qrtext = '单量不足，请充值后再继续添加';\n                }else if(res.status == -2) {\n                    this.qrtext = '权限不足，无法操作';\n                }else{\n                    // 系统错误\n                    this.qrtext = '';\n                }\n            });\n        }\n    },\n    beforeDestroy() {\n        if (this.timer != null) {\n            clearInterval(this.timer);\n        }\n    },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.content {\n  background: #ededed;\n  min-height: 500px;\n  padding: 20px 40px;\n  margin: 0 10px;\n  margin-top: 20px;\n  .qrbody {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n    padding-top: 80px;\n    .hint {\n      margin-top: 20px;\n      font-size: 14px;\n      color: #888888;\n    }\n  }\n}\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Qrgrant.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Qrgrant.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Qrgrant.vue?vue&type=template&id=0ce5a5d8&scoped=true&\"\nimport script from \"./Qrgrant.vue?vue&type=script&lang=js&\"\nexport * from \"./Qrgrant.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Qrgrant.vue?vue&type=style&index=0&id=0ce5a5d8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ce5a5d8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Qrgrant.vue?vue&type=style&index=0&id=0ce5a5d8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Qrgrant.vue?vue&type=style&index=0&id=0ce5a5d8&lang=scss&scoped=true&\""],"sourceRoot":""}